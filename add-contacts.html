<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Add Contact</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="main-container">
        <div class="profile-form-container">
            <div id="avatarImage">
                <img src="avatar.jpg" alt="Profile Picture" />
            </div>
            <form id="editform" class="profile-fields">
                <label for="firstname">First Name</label>
                <input type="text" name="firstname" id="firstname">
                <label for="lastname">Last Name</label>
                <input type="text" name="lastname" id="lastname">
                <label for="mobile">Contact</label>
                <input type="text" name="mobile" id="mobile">
                <label for="email">Email</label>
                <input type="email" name="email" id="email">
                <label for="avatar">Change Profile Picture</label>
                <input type="file" name="avatar" id="avatar">
                <div class="profile-buttons">
                    <button type="submit" id="submitForm">Submit</button>
                    <button type="button" id="homeLink">Home</button>
                </div>
            </form>
        </div>
    </div>
    <script src="config.js"></script>
    <script>
        document.getElementById("editform").addEventListener('submit', submitForm);
        document.getElementById("homeLink").addEventListener('click', function() {
            window.open("index.html", "_self");
        });

        function submitForm(e){
            e.preventDefault();
            const form = new FormData(document.getElementById('editform'));
            form.append('apiKey', apiKey);

            fetch(rootPath + 'controller/insert-contact/', {
                method: 'POST',
                body: form
            })
            .then(function(response) {
                return response.text();
            })
            .then(function(data) {
                if (data == "1") {
                    alert("Contact added successfully!");
                    window.open("index.html", "_self");
                } else {
                    alert(data);
                }
            });
        }
    </script>
</body>
</html>